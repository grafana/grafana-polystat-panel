<div class="gf-form-group">
    <div class="edit-tab-content">
            <h5>Composites
                <tip>Combines multiple metrics into a new name</tip>
            </h5>
            <div class="gf-form-group" ng-repeat="composite in ctrl.compositesManager.metricComposites">

                <div class="gf-form">
                    <div class="gf-form">
                        <label class="gf-form-label">
                        <i class="fa fa-trash pointer" ng-click="ctrl.compositesManager.removeMetricComposite(composite)"></i>
                        </label>
                    </div>
                    <div class="gf-form">
                        <label class="gf-form-label width-9">Composite Name</label>
                        <input type="text" ng-model="composite.compositeName" ng-blur="ctrl.render()" class="gf-form-input width-16">
                    </div>

                    <gf-form-switch class="gf-form" label="Hide Members" label-class="width-8" checked="composite.hideMembers" on-change="ctrl.refresh()">
                    </gf-form-switch>
                    <gf-form-switch class="gf-form" label="Show Name" label-class="width-7" checked="composite.showName" on-change="ctrl.refresh()">
                    </gf-form-switch>
                    <gf-form-switch class="gf-form" label="Show Value" label-class="width-7" checked="composite.showValue" on-change="ctrl.refresh()">
                    </gf-form-switch>
                </div>
                <!-- Next row animation properties -->
                <div class="gf-form" style="margin-left: 31px;">
                    <label class="gf-form-label width-9">Animate Mode
                        <tip>how members are rendered</tip>
                    </label>
                    <div class="gf-form-select-wrapper">
                      <select class="gf-form-input width-16"
                        style="margin-left: 3px;"
                        ng-model="composite.animateMode"
                        ng-options="f.value as f.text for f in ctrl.animationModes"
                        ng-change="ctrl.refresh()">
                      </select>
			            </select>
		            </div>
                    <div class="gf-form">
                        <label class="gf-form-label width-7" style="margin-left: 3px;">Clickthrough</label>
                            <input type="text" ng-model="composite.clickThrough" ng-blur="ctrl.render()" class="gf-form-input width-30">
                    </div>
                    <div class="gf-form">
                <gf-form-switch class="gf-form" label-class="width-5" switch-class="max-width-7" label="Sanitize" checked="composite.sanitizeURLEnabled" on-change="ctrl.render()"></gf-form-switch>
			        </div>
                </div>
                <!-- next row holds metric list -->
                <div class="gf-form" style="margin-left: 31px">
                    <div class="gf-form">
                        <label class="gf-form-label width-9">
                            <i class="fa fa-plus pointer" ng-click="ctrl.compositesManager.addMetricToComposite(composite)"></i>
                            Add Metric
                            <tip>Accepts metric name or regex</tip>         
                        </label>
                    </div>
                    <!-- Metrics that comprise the composite-->
                    <div class="gf-form" ng-repeat="metric in composite.members">
                        <div class="gf-form-inline">
                        <div class="gf-form">
                			<input type="text" class="gf-form-input width-14"
					               ng-model="metric.seriesName"
					               spellcheck="false"
					               bs-typeahead="ctrl.compositesManager.suggestMetricNames"
					               placeholder="metric name"
					               data-min-length="0" data-items="100"
					               ng-blur="ctrl.compositesManager.metricNameChanged(metric)">
                        </div>
                        <div class="gf-form">
                            <label class="gf-form-label">
                                <i class="fa fa-trash pointer" ng-click="ctrl.compositesManager.removeMetricFromComposite(composite, metric)"></i>
                            </label>
                        </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn btn-inverse" ng-click="ctrl.compositesManager.addMetricComposite()">
                <i class="fa fa-plus"></i>&nbsp;Add Composite
            </button>
    </div>
</div>

